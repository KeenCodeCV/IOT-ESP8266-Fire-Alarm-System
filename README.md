# üî• IoT Fire Alarm System ‚Äì ESP8266 + MQ-2 + Flame + DHT22 + TFT + Firebase/Blynk

## ‡∏î‡∏π‡∏Ñ‡∏•‡∏¥‡∏õ‡∏£‡∏µ‡∏ß‡∏¥‡∏ß‡∏≠‡∏∏‡∏õ‡∏Å‡∏£‡∏ì‡πå‡πÑ‡∏î‡πâ‡∏ó‡∏µ‡πà https://youtu.be/foR5ZaKeqn0?si=HviKViOOjZy2VsCi 

‡∏£‡∏∞‡∏ö‡∏ö‡∏ï‡πâ‡∏ô‡πÅ‡∏ö‡∏ö‡∏ï‡∏£‡∏ß‡∏à‡∏à‡∏±‡∏ö‡πÅ‡∏•‡∏∞‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô‡πÑ‡∏ü‡πÑ‡∏´‡∏°‡πâ‡πÅ‡∏ö‡∏ö‡∏Ñ‡∏£‡∏ö‡∏ß‡∏á‡∏à‡∏£ ‡πÉ‡∏ä‡πâ‡∏ö‡∏≠‡∏£‡πå‡∏î **ESP8266** ‡∏™‡∏≠‡∏á‡∏ï‡∏±‡∏ß ‡πÑ‡∏î‡πâ‡πÅ‡∏Å‡πà  

- **Sensor Node** : ‡∏≠‡πà‡∏≤‡∏ô‡∏Ñ‡πà‡∏≤‡πÄ‡∏ã‡∏ô‡πÄ‡∏ã‡∏≠‡∏£‡πå (MQ-2, Flame, DHT22), ‡∏Ñ‡∏ß‡∏ö‡∏Ñ‡∏∏‡∏° LED/‡∏ö‡∏±‡∏ã‡πÄ‡∏ã‡∏≠‡∏£‡πå ‡πÅ‡∏•‡∏∞‡∏™‡πà‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Ç‡∏∂‡πâ‡∏ô **Firebase RTDB** ‡πÅ‡∏•‡∏∞ **Blynk**  
- **Display Node** : ‡∏î‡∏∂‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏•‡πà‡∏≤‡∏™‡∏∏‡∏î‡∏à‡∏≤‡∏Å **Firebase RTDB** ‡∏°‡∏≤‡πÅ‡∏™‡∏î‡∏á‡∏ö‡∏ô‡∏à‡∏≠ **TFT 3.5\" (TFT_eSPI)**

---

## üìÇ ‡πÇ‡∏Ñ‡∏£‡∏á‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÇ‡∏õ‡∏£‡πÄ‡∏à‡∏Å‡∏ï‡πå

```
/ (Arduino sketches)
‚îú‚îÄ CodeSensor.ino        # ‡πÇ‡∏Ñ‡πâ‡∏î Sensor Node + Firebase + Blynk + Alarm Logic
‚îî‚îÄ CodeDisplayLCD.ino    # ‡πÇ‡∏Ñ‡πâ‡∏î Display Node + TFT_eSPI + Firebase Reader + UI
```

---
![553060630_670841895583296_6913829591042675090_n](https://github.com/user-attachments/assets/604172ed-e18a-42dc-b8aa-9ce1334759c4)


## ‚öôÔ∏è ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏Å‡∏≤‡∏£‡∏ó‡∏≥‡∏á‡∏≤‡∏ô

### üõ∞ Sensor Node (`CodeSensor.ino`)
- ‡∏≠‡πà‡∏≤‡∏ô‡∏Ñ‡πà‡∏≤:
  - **DHT22** (‡∏≠‡∏∏‡∏ì‡∏´‡∏†‡∏π‡∏°‡∏¥/‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ä‡∏∑‡πâ‡∏ô) ‚Äì D5
  - **MQ-2** Gas sensor ‚Äì A0 (Analog), D6 (Digital)
  - **Flame sensor** ‚Äì D0 (*Active Low*)
- ‡∏≠‡∏∏‡∏õ‡∏Å‡∏£‡∏ì‡πå‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô:
  - **LED**: RED (D4), GREEN (D3) (*Active Low*)
  - **Passive Buzzer**: D7, ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ñ‡∏µ‡πà‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô 2000 Hz
- ‡πÄ‡∏Å‡∏ì‡∏ë‡πå‡∏ï‡∏£‡∏ß‡∏à‡∏à‡∏±‡∏ö:
  - MQ-2 Analog > 450
  - Temp > 50 ¬∞C
  - Flame detected (‡∏ñ‡∏∑‡∏≠‡∏Ñ‡πà‡∏≤ 3 ‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ‡∏•‡∏î false alarm)
- ‡∏Å‡∏≤‡∏£‡∏™‡∏∑‡πà‡∏≠‡∏™‡∏≤‡∏£:
  - **Blynk**: ‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡∏Ñ‡πà‡∏≤ (V0‚ÄìV9) ‡πÅ‡∏•‡∏∞‡∏£‡∏±‡∏ö‡∏Ñ‡∏≥‡∏™‡∏±‡πà‡∏á‡∏Ñ‡∏ß‡∏ö‡∏Ñ‡∏∏‡∏° (V10‚ÄìV12)
  - **Firebase RTDB**: ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å `/sensor_data`, `/current_status`, `/alerts`
  - **NTP Time**: ‡∏ã‡∏¥‡∏á‡∏Ñ‡πå UTC+7

### üì∫ Display Node (`CodeDisplayLCD.ino`)
- ‡∏î‡∏∂‡∏á JSON `/current_status` ‡∏à‡∏≤‡∏Å Firebase ‡∏ó‡∏∏‡∏Å 1 ‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ
- ‡πÅ‡∏™‡∏î‡∏á‡∏ú‡∏•‡∏ö‡∏ô **TFT_eSPI 3.5\"**
  - ‡πÇ‡∏´‡∏°‡∏î‡∏õ‡∏Å‡∏ï‡∏¥: ‡∏ï‡∏≤‡∏£‡∏≤‡∏á‡∏Ñ‡πà‡∏≤ (Temp, Humidity, Gas, Flame, Smoke, Status, Wi-Fi)
  - ‡πÇ‡∏´‡∏°‡∏î‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô: ‡πÅ‡∏™‡∏î‡∏á‡∏´‡∏ô‡πâ‡∏≤‡∏à‡∏≠‡πÅ‡∏î‡∏á + ‡πÑ‡∏≠‡∏Ñ‡∏≠‡∏ô‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô + ‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏° **EVACUATE NOW**
- ‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£ Wi-Fi ‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥, ‡πÅ‡∏™‡∏î‡∏á Wi-Fi OK/ERROR
- ‡∏™‡∏µ‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏ï‡∏≤‡∏°‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞ (‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ß/‡∏™‡πâ‡∏°/‡πÄ‡∏´‡∏•‡∏∑‡∏≠‡∏á)

---

## üîå ‡∏Å‡∏≤‡∏£‡∏ï‡πà‡∏≠‡∏ß‡∏á‡∏à‡∏£ (Sensor Node)

| ‡∏≠‡∏∏‡∏õ‡∏Å‡∏£‡∏ì‡πå        | Pin ESP8266 | ‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏´‡∏ï‡∏∏ |
|-----------------|-------------|-----------|
| DHT22           | D5          | Data |
| MQ-2 Analog     | A0          | ‡∏ï‡πâ‡∏≠‡∏á‡∏°‡∏µ‡∏ß‡∏á‡∏à‡∏£‡πÅ‡∏ö‡πà‡∏á‡πÅ‡∏£‡∏á‡∏î‡∏±‡∏ô (0‚Äì1V) |
| MQ-2 Digital    | D6          | Digital Output |
| Flame Sensor    | D0          | Active-Low, ‡∏≠‡∏≤‡∏à‡∏ï‡πâ‡∏≠‡∏á pull-up ‡∏†‡∏≤‡∏¢‡∏ô‡∏≠‡∏Å |
| LED RED         | D4          | Active-Low |
| LED GREEN       | D3          | Active-Low |
| Buzzer          | D7          | Passive buzzer |

---

## ‚òÅÔ∏è Firebase RTDB ‚Äì ‡πÇ‡∏Ñ‡∏£‡∏á‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•

```json
/sensor_data/1727938123456: {
  "timestamp": "2025-10-03 12:34:56",
  "temperature": 29.3,
  "humidity": 64.1,
  "mq2_analog": 512,
  "mq2_digital": 0,
  "flame_raw": 1,
  "smoke_detected": false,
  "flame_detected": false,
  "status": "NORMAL"
}

/current_status: {
  "timestamp": "2025-10-03 12:34:56",
  "temperature": 29.3,
  "humidity": 64.1,
  "mq2_analog": 512,
  "flame_detected": false,
  "smoke_detected": false,
  "status": "NORMAL"
}
```

---

## üì± Blynk Virtual Pins

| Virtual Pin | ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏´‡∏°‡∏≤‡∏¢ |
|-------------|-----------|
| V0‚ÄìV9       | ‡∏Ñ‡πà‡∏≤‡πÄ‡∏ã‡∏ô‡πÄ‡∏ã‡∏≠‡∏£‡πå & ‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞ |
| V10         | ‡∏Ñ‡∏ß‡∏ö‡∏Ñ‡∏∏‡∏° LED ‡πÅ‡∏î‡∏á |
| V11         | ‡∏Ñ‡∏ß‡∏ö‡∏Ñ‡∏∏‡∏° LED ‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ß |
| V12         | ‡∏Ñ‡∏ß‡∏ö‡∏Ñ‡∏∏‡∏° Buzzer |

---

## üõ† ‡πÑ‡∏•‡∏ö‡∏£‡∏≤‡∏£‡∏µ‡∏ó‡∏µ‡πà‡πÉ‡∏ä‡πâ

- `DHT sensor library`
- `Blynk`
- `FirebaseESP8266`
- `TFT_eSPI`
- `time.h`

---

## üöÄ ‡∏ß‡∏¥‡∏ò‡∏µ‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô

1. ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ Firebase RTDB ‡πÅ‡∏•‡∏∞‡πÄ‡∏õ‡∏¥‡∏î‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô Legacy Token  
2. ‡πÉ‡∏™‡πà `ssid`, `pass`, `FIREBASE_HOST`, `FIREBASE_AUTH`, `BLYNK_AUTH_TOKEN`  
3. ‡∏≠‡∏±‡∏õ‡πÇ‡∏´‡∏•‡∏î `CodeSensor.ino` ‡πÑ‡∏õ‡∏¢‡∏±‡∏á ESP8266 (Sensor Node)  
4. ‡∏≠‡∏±‡∏õ‡πÇ‡∏´‡∏•‡∏î `CodeDisplayLCD.ino` ‡πÑ‡∏õ‡∏¢‡∏±‡∏á ESP8266 + TFT (Display Node)  
5. ‡πÄ‡∏õ‡∏¥‡∏î Serial Monitor ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏Å‡∏≤‡∏£‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠  
6. ‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡∏î‡πâ‡∏ß‡∏¢‡∏Ñ‡∏ß‡∏±‡∏ô/‡πÄ‡∏õ‡∏•‡∏ß‡πÑ‡∏ü (‡πÉ‡∏ô‡∏ó‡∏µ‡πà‡∏õ‡∏•‡∏≠‡∏î‡∏†‡∏±‡∏¢) ‡πÅ‡∏•‡∏∞‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏Å‡∏≤‡∏£‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô

---

## ‚ö†Ô∏è ‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏£‡∏£‡∏∞‡∏ß‡∏±‡∏á

- MQ-2 A0 ‡∏ï‡πâ‡∏≠‡∏á‡πÑ‡∏°‡πà‡πÄ‡∏Å‡∏¥‡∏ô 1.0V ‚Üí ‡πÉ‡∏ä‡πâ‡∏ß‡∏á‡∏à‡∏£‡πÅ‡∏ö‡πà‡∏á‡πÅ‡∏£‡∏á‡∏î‡∏±‡∏ô
- Flame Sensor ‡∏≠‡∏≤‡∏à‡∏ï‡πâ‡∏≠‡∏á‡πÄ‡∏û‡∏¥‡πà‡∏° pull-up ‡∏†‡∏≤‡∏¢‡∏ô‡∏≠‡∏Å
- ‡∏´‡∏•‡∏µ‡∏Å‡πÄ‡∏•‡∏µ‡πà‡∏¢‡∏á‡πÉ‡∏ä‡πâ D3/D8 ‡∏î‡∏∂‡∏á‡∏•‡∏á‡∏Ç‡∏ì‡∏∞‡∏ö‡∏π‡∏ï (boot-strap pins)
- ‡πÄ‡∏Å‡∏ì‡∏ë‡πå Temp (50¬∞C) ‡πÅ‡∏•‡∏∞ MQ2 Threshold ‡∏Ñ‡∏ß‡∏£‡∏õ‡∏£‡∏±‡∏ö‡∏ï‡∏≤‡∏°‡∏™‡∏†‡∏≤‡∏û‡∏à‡∏£‡∏¥‡∏á
- ‡∏ó‡∏î‡∏•‡∏≠‡∏á‡πÑ‡∏ü/‡∏Ñ‡∏ß‡∏±‡∏ô‡πÉ‡∏ô‡∏û‡∏∑‡πâ‡∏ô‡∏ó‡∏µ‡πà‡∏Ñ‡∏ß‡∏ö‡∏Ñ‡∏∏‡∏° ‡∏û‡∏£‡πâ‡∏≠‡∏°‡∏≠‡∏∏‡∏õ‡∏Å‡∏£‡∏ì‡πå‡∏î‡∏±‡∏ö‡πÄ‡∏û‡∏•‡∏¥‡∏á

---

## üìù Roadmap ‡∏õ‡∏£‡∏±‡∏ö‡∏õ‡∏£‡∏∏‡∏á

- Moving Average filter ‡∏•‡∏î noise
- Thresholds ‡∏≠‡πà‡∏≤‡∏ô‡∏à‡∏≤‡∏Å Firebase (‡∏õ‡∏£‡∏±‡∏ö‡∏™‡∏î‡πÑ‡∏î‡πâ)
- Offline buffer + sync ‡∏¢‡πâ‡∏≠‡∏ô‡∏´‡∏•‡∏±‡∏á
- Push Notification (‡∏ú‡πà‡∏≤‡∏ô FCM)
- ‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡∏£‡∏∞‡∏ö‡∏ö Auth ‡∏Ç‡∏≠‡∏á Firebase ‡πÉ‡∏´‡πâ‡∏ó‡∏±‡∏ô‡∏™‡∏°‡∏±‡∏¢

